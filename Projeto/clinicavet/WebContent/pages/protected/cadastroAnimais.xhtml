<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:fn="http://java.sun.com/jsp/jstl/functions"
xmlns:p="http://primefaces.org/ui">
<h:body>
<ui:composition template="/pages/protected/template.xhtml">
<ui:define name="main">
<h:form id="formAnimais">

<h1 class="titulo-pagina"><h:outputText value="#{bundle.viewCadastroAnimais}"/></h1>
<br />

<div>
<p:dataTable var="animal" value="#{cadastroAnimaisMB.animais}">
	<p:column headerText="#{bundle.lblNomeAnimal}">
        <h:outputText value="#{animal.nome}" />
    </p:column>
    <p:column headerText="#{bundle.lblNomeDono}">
        <h:outputText value="#{animal.dono.nome}" />
    </p:column>
    <p:column headerText="#{bundle.lblNomeEspecie}">
        <h:outputText value="#{animal.especie.nome}" />
    </p:column>
    <p:column style="width:110px;text-align: center">
         <p:commandButton update=":formDialog" oncomplete="PF('edicaoAnimal').show()" icon="ui-icon-pencil" title="Editar" >
            <f:setPropertyActionListener value="#{animal}" target="#{cadastroAnimaisMB.animalEdicao}"/>
        </p:commandButton>
    </p:column>
</p:dataTable>
</div>
</h:form>

<h:form id="formDialog">
<p:dialog header="#{bundle.headerModalAnimais}" widgetVar="edicaoAnimal" modal="true" resizable="false" width="400px">
    <p:outputPanel id="detalhesAnimal" style="text-align:center;">
        <h:panelGrid columns="2"	>
			<h:outputLabel value="#{bundle.lblNomeAnimal}" />
			<h:inputText value="#{cadastroAnimaisMB.animalEdicao.nome}" label="#{bundle.lblNomeAnimal}" id="nomeAnimal" required="true" />
		</h:panelGrid>
    </p:outputPanel>
    <br />
    <p:commandButton value="#{bundle.btnSalvar}" style="float:right; margin-top:30px;" action="#{cadastroAnimaisMB.salvarAlteracoesAnimal}" 
    	oncomplete="PF('edicaoAnimal').hide();" icon="ui-icon-check" update=":formAnimais"/>
</p:dialog>
</h:form>

</ui:define>
</ui:composition>
</h:body>
</html>